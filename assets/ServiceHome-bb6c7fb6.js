import{W as D,a as $,b as te,_ as O,c as oe,d as V,U as ae,G as H,e as q,f as F,g as M,h as J,i as Y,j as z,s as Q,m as w,u as B,k as W,l as x,r as i,o as d,n as _,p as c,q as t,w as o,t as n,v as u,x as k,y as T,F as L,z as N,A as R,B as U,C as ne,D as K,E as X,H as se,I as E,T as j,V as I,J as re,K as ie,L as ce,M as Z,N as le,O as de,P as ue,Q as me,R as _e,S as ee,X as pe,Y as fe,Z as he,$ as be,a0 as ge}from"./index-6630f33b.js";import{G as ve,a as Pe,b as we,c as ye,d as Se}from"./GdsNotifyTitle-00a1dbb7.js";const ke={name:"home-view",props:{homeText:{type:Object,required:!0}},emits:["changePage"],components:{WraButton:D,WraServiceLogo:$,WraSubheader:te,WraDivider:O,WraCard:oe,WraHeader:V,UserToDo:ae,GdsTable:H,GdsTableBody:q,GdsTableData:F,GdsTableHead:M,GdsTableHeader:J,GdsTableRow:Y,GdsTag:z,GdsNotify:ve,GdsNotifyContent:Pe,GdsNotifyHeader:we,GdsNotifyHeading:ye,GdsNotifyTitle:Se},data(){return{accomProviderList:{}}},methods:{convertReadable:function(e){return e?e="Yes":e="No",e}},created(){if(this.accomProviderList=JSON.parse(JSON.stringify(this.providersStore.getProviders)),this.accomPresent=this.accomProviderList.length>0,!!this.accomPresent)for(const e of this.accomProviderList)Object.keys(e).length<=0||"accomodation"in e&&(e.accommodation.accomType=Q(e.accommodation.accomType)??"",e.accommodation.accomMainRes=this.convertReadable(e.accommodation.accomMainRes)??"",e.accommodation.responsibleCurrentYear=this.convertReadable(e.accommodation.responsibleCurrentYear)??"")},computed:{...w(B,["account"]),...w(W,["providers"])}},Le=c("button",{class:"button-anchor"}," View ",-1),Ce={key:1};function Te(e,a,m,C,l,s){const y=i("wra-header"),b=i("user-to-do"),r=i("gds-table-header"),v=i("gds-table-row"),S=i("gds-table-head"),g=i("gds-table-data"),p=i("gds-tag"),f=i("gds-table-body"),h=i("gds-table");return d(),_(L,null,[c("header",null,[t(y,{size:"h2",class:"pb-6"},{default:o(()=>[n(u(m.homeText.homeView.title),1)]),_:1})]),t(b,{"todo-text":m.homeText.todoList},null,8,["todo-text"]),l.accomProviderList.length>0?(d(),k(h,{key:0,class:"my-8",caption:"Levy payments"},{default:o(()=>[t(S,null,{default:o(()=>[t(v,null,{default:o(()=>[t(r,{scope:"col"},{default:o(()=>[n(" Period ")]),_:1}),t(r,{scope:"col",numeric:!0},{default:o(()=>[n(" Amount ")]),_:1}),t(r,{scope:"col",numeric:!0},{default:o(()=>[n(" Properties ")]),_:1}),t(r,{scope:"col",numeric:!0},{default:o(()=>[n(" Status ")]),_:1}),t(r,{scope:"col",numeric:!0})]),_:1})]),_:1}),t(f,null,{default:o(()=>[t(v,null,{default:o(()=>[t(r,{scope:"row"},{default:o(()=>[n(" Apr - Jun 2026 ")]),_:1}),t(g,{numeric:!0},{default:o(()=>[n(" Â£0 ")]),_:1}),t(g,{numeric:!0},{default:o(()=>[n(" 2 ")]),_:1}),t(g,{numeric:!0},{default:o(()=>[t(p,null,{default:o(()=>[n(" Starts soon ")]),_:1})]),_:1}),t(g,{nuermic:!0},{default:o(()=>[Le]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0),l.accomProviderList.length>0?(d(),_("div",Ce,[t(h,{caption:"Visitor accommodations registered"},{default:o(()=>[t(S,null,{default:o(()=>[t(r,{scope:"col"},{default:o(()=>[n(" Name ")]),_:1}),t(r,{scope:"col"},{default:o(()=>[n(" Address ")]),_:1}),t(r,{numeric:!0,scope:"col"},{default:o(()=>[n(" Council ")]),_:1}),t(r,{numeric:!0,scope:"col"})]),_:1}),t(f,null,{default:o(()=>[(d(!0),_(L,null,N(l.accomProviderList,(P,G)=>(d(),k(v,null,{default:o(()=>[t(r,null,{default:o(()=>{var A;return[n(u(((A=P.accommodation)==null?void 0:A.accomName)??`${m.homeText.accommodationView.noNamePlaceholder} ${G+1}`),1)]}),_:2},1024),t(g,{scope:"row"},{default:o(()=>[n(u(P.accommodation.address.postcode),1)]),_:2},1024),t(g,{numeric:!0},{default:o(()=>[n(" Cardiff ")]),_:1}),t(g,{numeric:!0},{default:o(()=>[c("button",{class:"button-anchor",onClick:a[0]||(a[0]=A=>e.$emit("changePage","AccommodationView"))}," View ")]),_:1})]),_:2},1024))),256))]),_:1})]),_:1}),c("button",{class:"mb-8 button-anchor standalone-anchor",onClick:a[1]||(a[1]=P=>e.$emit("changePage","AccommodationView"))}," View properties ")])):T("",!0)],64)}const xe=x(ke,[["render",Te]]);const Ve={name:"accommodation-view",props:{homeText:{type:Object,required:!0}},emits:["changePage"],components:{WraButton:D,WraServiceLogo:$,WraViewTitle:R,WraHeader:V,WraDivider:O,WraValidationTooltip:U,GdsSummaryAccom:ne,GdsSumCard:K,GdsSumCardActions:X},data(){return{accomProviderList:[],accomPresent:!1,panels:[],tab:[],showLinkError:!1}},methods:{convertReadable:function(e){return e?e="Yes":e="No",e},editField:function(e,a){this.formStateStore.startEdit(a,[a],"AccommodationView"),this.formStateStore.setQueues([e]),this.$router.push({name:"vlRegistration"})},startProvider:function(){this.$router.push({name:"vlRegistration"})},editProvider:function(e){this.providersStore.setProviderIndex(e),this.$emit("changePage","EditProperty")},changePage:function(e){currentView=e},accomCompleteWrapper:function(e){return se(e)},linkBusinesses:function(){if(this.formStateStore.getLiableQueue.length<=0){this.showLinkError=!0;return}let e=this.formStateStore.getLiableQueue.length==1?"LiablePersonSelect":"SmartSameProvider";this.formStateStore.setFormStartComponent(e),this.$router.push({name:"vlRegistration"})}},created(){this.accomProviderList=JSON.parse(JSON.stringify(this.providersStore.getProviders));for(const e of this.accomProviderList)if(!(Object.keys(e).length<=0)){if("accomodation"in e&&(e.accommodation.accomType=Q(e.accommodation.accomType)??"",e.accommodation.accomMainRes=this.convertReadable(e.accommodation.accomMainRes)??"",e.accommodation.responsibleCurrentYear=this.convertReadable(e.accommodation.responsibleCurrentYear)??""),"contactPerson"in e){if("langPref"in e.contactPerson)try{e.contactPerson.langPref=e.contactPerson.langPref.charAt(0).toUpperCase()+e.contactPerson.langPref.slice(1)}catch{e.contactPerson.langPref=""}"contactPref"in e.contactPerson&&(e.contactPerson.contactPref.forEach((a,m)=>{m<=0&&(e.contactPerson.contactPref[m]=a.charAt(0).toUpperCase()+a.slice(1))}),e.contactPerson.contactPref=e.contactPerson.contactPref.join(", "))}"levy"in e&&(e.levy.annualReturn=this.convertReadable(e.levy.annualReturn)??"")}this.accomPresent=this.accomProviderList.length>0},computed:{...w(W,["providers"]),...w(E,["formState"]),accomText(){return this.homeText.accommodationView}}},Ae=e=>(re("data-v-4875e940"),e=e(),ie(),e),$e=Ae(()=>c("span",{class:"sr-only"},"Error:",-1)),Ne={class:"mb-4"},Re={class:"gds-sum-card-title"},Ee=["onClick"],Ge=["onClick"],Ie={key:1,class:"no-provider pa-4"};function De(e,a,m,C,l,s){const y=i("wra-header"),b=i("wra-validation-tooltip"),r=i("wra-button"),v=i("gds-sum-card-actions"),S=i("gds-summary-accom"),g=i("gds-sum-card");return d(),_(L,null,[t(y,{size:"h2",class:"mb-6"},{default:o(()=>[n(u(s.accomText.title),1)]),_:1}),t(j,{name:"translate",mod:"out-in"},{default:o(()=>[l.showLinkError?(d(),_("div",{class:"my-4",key:s.accomText.noLiableLink},[t(b,{type:"wra-error",role:"alert"},{default:o(()=>[$e,n(" "+u(s.accomText.noLiableLink),1)]),_:1})])):T("",!0)]),_:1}),t(r,{variant:"flat",color:"#019e1e",ripple:!0,class:"mb-4",lang:"en","prepend-icon":"mdi-home-plus",onClick:a[0]||(a[0]=p=>e.$router.push({name:"vlRegistration"}))},{default:o(()=>[n(u(s.accomText.addAccommodation),1)]),_:1}),t(r,{variant:"flat",color:"#019e1e",ripple:!0,class:"mb-4 ml-4",lang:"en","prepend-icon":"mdi-link-plus",onClick:a[1]||(a[1]=p=>s.linkBusinesses())},{default:o(()=>[n(u(s.accomText.linkLiable),1)]),_:1}),l.accomPresent?(d(!0),_(L,{key:0},N(l.accomProviderList,(p,f)=>(d(),_("div",Ne,["accommodation"in p?(d(),k(g,{key:0},{title:o(()=>{var h;return[c("div",Re,[t(I,{class:"mr-4 pb-1"},{default:o(()=>[n("mdi-home")]),_:1}),c("h3",null,u(((h=p.accommodation)==null?void 0:h.accomName)??`${s.accomText.noNamePlaceholder} ${f+1}`),1)]),t(v,null,{default:o(()=>[c("li",null,[s.accomCompleteWrapper(l.accomProviderList[f])?T("",!0):(d(),_("button",{key:0,class:"button-anchor",id:"fill-levy-button",onClick:P=>s.startProvider(f)},u(s.accomText.incomplete),9,Ee))]),c("li",null,[c("button",{class:"button-anchor",id:"change-accommodation",onClick:P=>s.editProvider(f)}," Change ",8,Ge)])]),_:2},1024)]}),default:o(()=>[t(S,{"accommodation-details":p.accommodation,onEditPressed:h=>s.editField(f,h)},null,8,["accommodation-details","onEditPressed"])]),_:2},1024)):(d(),_("div",Ie,[t(r,{color:"#c85442",variant:"flat",ripple:!1,class:"pa-8",id:"nextButton",onClick:h=>s.startProvider(f)},{default:o(()=>[n(u(s.accomText.completeReg),1)]),_:2},1032,["onClick"])]))]))),256)):T("",!0)],64)}const Oe=x(Ve,[["render",De],["__scopeId","data-v-4875e940"]]);const Be={name:"account-view",props:{homeText:{type:Object,requried:!0},accountInfo:{type:Object,required:!0}},emits:["editPressed"],components:{WraSimpleTable:ce,WraHeader:V,WraViewTitle:R,GdsTable:H,GdsTableBody:q,GdsTableData:F,GdsTableHead:M,GdsTableHeader:J,GdsTableRow:Y,GdsTag:z},data(){return{accountInfo:{},members:[]}},methods:{convertReadable:function(e){return e?e="Yes":e="No",e},startAddAccount:function(){this.formStateStore.setReturnPage("AccountView")},editMember:function(e){this.accountStore.setMemberIndex(e),this.$router.push({name:"addAccount"})}},computed:{...w(E,["formState"]),...w(B,["account"])},created(){this.accountInfo=structuredClone(Z(this.accountStore.getAccountDetails)),this.members=this.accountStore.getMembers}},We=["onClick"];function je(e,a,m,C,l,s){const y=i("wra-header"),b=i("gds-table-header"),r=i("gds-table-data"),v=i("gds-table-row"),S=i("gds-table-body"),g=i("gds-table"),p=i("gds-table-head"),f=i("gds-tag"),h=i("router-link");return d(),_(L,null,[t(y,{size:"h2",class:"mb-6"},{default:o(()=>[n(u(m.homeText.settings.title),1)]),_:1}),t(g,{class:"mt-6",caption:"Account information"},{default:o(()=>[t(S,null,{default:o(()=>[t(v,null,{default:o(()=>[t(b,{scope:"row"},{default:o(()=>[n(" Email ")]),_:1}),t(r,{numeric:!0},{default:o(()=>[n(u(l.accountInfo.email??"No email"),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"mt-6",caption:"Account members"},{default:o(()=>[t(p,null,{default:o(()=>[t(v,null,{default:o(()=>[t(b,null,{default:o(()=>[n("Email")]),_:1}),t(b,{scope:"col",numeric:!0},{default:o(()=>[n(" Permission ")]),_:1}),t(b,{scope:"col",numeric:!0},{default:o(()=>[n(" Added ")]),_:1}),t(b,{scope:"col",numeric:!0})]),_:1})]),_:1}),t(S,null,{default:o(()=>[l.members.length==0?(d(),k(v,{key:0},{default:o(()=>[t(r,null,{default:o(()=>[n("No members yet")]),_:1}),t(r),t(r),t(r)]),_:1})):T("",!0),(d(!0),_(L,null,N(l.members,(P,G)=>(d(),k(v,null,{default:o(()=>[t(b,{scope:"row"},{default:o(()=>[n(u(P.email),1)]),_:2},1024),t(r,{numeric:!0},{default:o(()=>[t(f,{color:"yellow"},{default:o(()=>[n(u(P.permission.charAt(0).toUpperCase()+P.permission.slice(1)),1)]),_:2},1024)]),_:2},1024),t(r,{numeric:!0},{default:o(()=>[n(u(new Date().toLocaleDateString()),1)]),_:1}),t(r,{numeric:!0},{default:o(()=>[c("button",{class:"button-anchor",onClick:A=>s.editMember(G)}," Change ",8,We)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),t(h,{class:"router-link-new-member",to:{name:"addAccount"},onClick:s.startAddAccount},{default:o(()=>[n(" Add new member ")]),_:1},8,["onClick"])],64)}const He=x(Be,[["render",je]]);const qe={name:"liable-person-view",props:{homeText:{type:Object,required:!0}},emits:["changePage"],components:{WraButton:D,WraServiceLogo:$,WraViewTitle:R,WraHeader:V,WraDivider:O,WraValidationTooltip:U,CompanyDetailsTable:le,AccomDetailsTable:de,IndividualTable:ue,GdsSummaryCompany:me,GdsSummaryIndividual:_e,GdsSumCard:K,GdsSumCardActions:X},data(){return{panels:[],accomPanels:[],tabs:[],liablePeople:[],liablePeoplePresent:!1,showLinkError:!1}},methods:{editLiable:function(e,a){this.providersStore.setLiableIndex(e),a?this.formStateStore.startEdit("LiablePerson",["LiablePerson"],"LiableView"):this.formStateStore.startEdit("FirstLastName",["FirstLastName"],"LiableView"),this.$router.push({name:"vlRegistration"})},newLiable:function(){this.formStateStore.startEdit("LiableRelationship",["LiablePerson","FirstLastName"],"LiableView"),this.$router.push({name:"vlRegistration"})},linkedAccommodations:function(e){const a=this.providersStore.getProviders;let m=[];for(let[C,l]of a.entries())Object.hasOwn(l,"liablePersonIndex")&&l.liablePersonIndex==e&&m.push([C,l]);return m},linkBusinesses:function(){if(this.formStateStore.getLiableQueue.length<=0){this.showLinkError=!0;return}let e=this.formStateStore.getLiableQueue.length==1?"LiablePersonSelect":"SmartSameProvider";this.formStateStore.setFormStartComponent(e),this.$router.push({name:"vlRegistration"})}},created(){this.liablePeople=structuredClone(Z(this.providersStore.getLiablePersons)),this.liablePeoplePresent=this.liablePeople.length>0},computed:{...w(W,["providers"]),...w(E,["formState"]),liableText(){return this.homeText.liableView}}},Fe={class:"sr-only"},Me={key:0,class:"gds-sum-card-title"},Je={key:1,class:"gds-sum-card-title"};function Ye(e,a,m,C,l,s){const y=i("wra-header"),b=i("wra-validation-tooltip"),r=i("wra-button"),v=i("gds-summary-individual"),S=i("gds-summary-company"),g=i("gds-sum-card");return d(),_(L,null,[t(y,{size:"h2",class:"mb-6"},{default:o(()=>[n(u(s.liableText.title),1)]),_:1}),t(j,{name:"translate",mod:"out-in"},{default:o(()=>[l.showLinkError?(d(),_("div",{class:"my-4",key:s.liableText.noLiableLink},[t(b,{type:"wra-error",role:"alert"},{default:o(()=>[c("span",Fe,u(m.homeText.error),1),n(" "+u(s.liableText.noLiableLink),1)]),_:1})])):T("",!0)]),_:1}),t(r,{variant:"flat",color:"#019e1e",ripple:!0,class:"mb-4",lang:"en","prepend-icon":"mdi-home-plus",onClick:a[0]||(a[0]=p=>s.newLiable())},{default:o(()=>[n(u(s.liableText.addLiable),1)]),_:1}),t(r,{variant:"flat",color:"#019e1e",ripple:!0,class:"mb-4 ml-4",lang:"en","prepend-icon":"mdi-link-plus",onClick:a[1]||(a[1]=p=>s.linkBusinesses())},{default:o(()=>[n(u(s.liableText.linkLiable),1)]),_:1}),l.liablePeoplePresent?(d(!0),_(L,{key:0},N(l.liablePeople,(p,f)=>(d(),k(g,null,{title:o(()=>{var h,P;return["individual"in p?(d(),_("div",Me,[t(I,{class:"mr-4 pb-1"},{default:o(()=>[n("mdi-account")]),_:1}),c("h3",null,u(`Individual: ${(h=p.individual)==null?void 0:h.name}`??`Individual ${f+1}`),1)])):(d(),_("div",Je,[t(I,{class:"mr-4 pb-1"},{default:o(()=>[n("mdi-domain")]),_:1}),c("h3",null,u(`Company: ${(P=p.company)==null?void 0:P.companyName}`??`Company / charity ${f+1}`),1)]))]}),default:o(()=>["individual"in p?(d(),k(v,{key:0,"individual-store":p,onEditPressed:h=>s.editLiable(f,!1)},null,8,["individual-store","onEditPressed"])):(d(),k(S,{key:1,"company-store":p,onEditPressed:h=>s.editLiable(f,!1)},null,8,["company-store","onEditPressed"]))]),_:2},1024))),256)):T("",!0)],64)}const ze=x(qe,[["render",Ye],["__scopeId","data-v-318c554d"]]);const Qe={name:"gds-list",props:{bullet:{type:Boolean,required:!1},numbered:{type:Boolean,required:!1},spaced:{tye:Boolean,required:!1}}};function Ue(e,a,m,C,l,s){return d(),_("ul",{class:pe(["govuk-list",{"govuk-list--bullet":m.bullet&&!m.numbered,"govuk-list--number":m.numbered&&!m.bullet,"govuk-list--spaced":m.spaced}])},[ee(e.$slots,"default")],2)}const Ke=x(Qe,[["render",Ue]]);const Xe={name:"gds-phase"},Ze={class:"govuk-phase-banner"};function et(e,a,m,C,l,s){return d(),_("div",Ze,[ee(e.$slots,"default",{},void 0,!0)])}const tt=x(Xe,[["render",et],["__scopeId","data-v-73736c37"]]);const ot={name:"service-home",props:{lang:{type:String,required:!0}},components:{WraServiceLogo:$,WraViewTitle:R,WraHeader:V,HomeView:xe,AccommodationView:Oe,AccountView:He,LiableView:ze,GdsList:Ke,GdsPhase:tt,EditProperty:fe},data(){return{currentView:"HomeView",homeText:{navDrawer:{},todoList:{},homeView:{},accommodationView:{},liableView:{},settings:{}},accommodationNumber:{}}},methods:{changePage:function(e){this.currentView=e,this.$vuetify.display.mobile&&this.drawer==!0&&this.$emit("drawer-switch")},getText:function(){he.get(`./text/${this.lang}/home.json?v=2`).then(e=>{this.homeText=JSON.parse(JSON.stringify(e.data))})}},watch:{lang:{handler(){this.getText()}}},computed:{...w(E,["formState"]),...w(B,["account"]),getEmail(){return this.accountStore.getAccountDetails.email}},created(){this.getText(),this.formStateStore.getOriginComponent&&(this.currentView=this.formStateStore.getOriginComponent,this.formStateStore.resetOriginComponent())}},at={class:"pt-2"},nt={class:"d-flex justify-space-between phase-text"},st={class:"d-flex flex-wrap flex-md-nowrap py-8"},rt={class:"pr-4"};function it(e,a,m,C,l,s){const y=i("gds-phase"),b=i("gds-list");return d(),_(L,null,[c("header",at,[t(y,null,{default:o(()=>[c("div",nt,[c("div",null,u(s.getEmail??"[email]"),1),c("div",null,[c("a",{href:"#",onClick:a[0]||(a[0]=r=>e.$router.push({name:"login"}))},"Sign out")])])]),_:1})]),c("div",st,[c("nav",rt,[t(j,{name:"translate",mode:"out-in"},{default:o(()=>[c("div",null,[t(b,null,{default:o(()=>[c("li",null,[c("button",{class:"button-anchor",onClick:a[1]||(a[1]=r=>s.changePage("HomeView"))},u(l.homeText.navDrawer.home),1)]),c("li",null,[c("button",{class:"button-anchor",onClick:a[2]||(a[2]=r=>s.changePage("AccommodationView"))},u(l.homeText.navDrawer.accommodation),1)]),c("li",null,[c("button",{class:"button-anchor",onClick:a[3]||(a[3]=r=>s.changePage("LiableView"))},u(l.homeText.navDrawer.businesses),1)]),c("li",null,[c("button",{class:"button-anchor",onClick:a[4]||(a[4]=r=>s.changePage("AccountView"))},u(l.homeText.navDrawer.settings),1)])]),_:1})])]),_:1})]),t(be,{class:"pb-6 pt-0 px-0"},{default:o(()=>[c("section",null,[(d(),k(ge(l.currentView),{lang:m.lang,homeText:l.homeText,key:l.currentView,onChangePage:s.changePage},null,40,["lang","homeText","onChangePage"]))])]),_:1})])],64)}const dt=x(ot,[["render",it],["__scopeId","data-v-d32b3412"]]);export{dt as default};
