import{W as I,a as $,b as ee,_ as D,c as te,d as A,U as oe,G as j,e as H,f as q,g as F,h as M,i as J,j as Y,s as z,m as w,u as O,k as B,l as x,r as i,o as l,n as f,p as r,q as o,w as t,t as n,v as d,x as S,y as T,F as k,z as N,A as R,B as Q,C as ae,D as U,E as K,H as ne,I as E,T as W,V as G,J as se,K as re,L as ie,M as X,N as ce,O as le,P as de,Q as ue,R as me,S as Z,X as _e,Y as pe,Z as fe,$ as he,a0 as be}from"./index-bae049f9.js";import{G as ge,a as ve,b as Pe,c as we,d as ye}from"./GdsNotifyTitle-6e18e4be.js";const Se={name:"home-view",props:{homeText:{type:Object,required:!0}},emits:["changePage"],components:{WraButton:I,WraServiceLogo:$,WraSubheader:ee,WraDivider:D,WraCard:te,WraHeader:A,UserToDo:oe,GdsTable:j,GdsTableBody:H,GdsTableData:q,GdsTableHead:F,GdsTableHeader:M,GdsTableRow:J,GdsTag:Y,GdsNotify:ge,GdsNotifyContent:ve,GdsNotifyHeader:Pe,GdsNotifyHeading:we,GdsNotifyTitle:ye},data(){return{accomProviderList:{}}},methods:{convertReadable:function(e){return e?e="Yes":e="No",e}},created(){if(this.accomProviderList=JSON.parse(JSON.stringify(this.providersStore.getProviders)),this.accomPresent=this.accomProviderList.length>0,!!this.accomPresent)for(const e of this.accomProviderList)Object.keys(e).length<=0||"accomodation"in e&&(e.accommodation.accomType=z(e.accommodation.accomType)??"",e.accommodation.accomMainRes=this.convertReadable(e.accommodation.accomMainRes)??"",e.accommodation.responsibleCurrentYear=this.convertReadable(e.accommodation.responsibleCurrentYear)??"")},computed:{...w(O,["account"]),...w(B,["providers"])}},ke=r("button",{class:"button-anchor"}," View ",-1),Le={key:1};function Ce(e,a,_,L,c,s){const y=i("wra-header"),u=i("gds-table-header"),m=i("gds-table-row"),v=i("gds-table-head"),g=i("gds-table-data"),C=i("gds-tag"),p=i("gds-table-body"),h=i("gds-table");return l(),f(k,null,[r("header",null,[o(y,{size:"h2",class:"pb-6"},{default:t(()=>[n(d(_.homeText.homeView.title),1)]),_:1})]),c.accomProviderList.length>0?(l(),S(h,{key:0,class:"my-8",caption:"Levy payments"},{default:t(()=>[o(v,null,{default:t(()=>[o(m,null,{default:t(()=>[o(u,{scope:"col"},{default:t(()=>[n(" Period ")]),_:1}),o(u,{scope:"col",numeric:!0},{default:t(()=>[n(" Amount ")]),_:1}),o(u,{scope:"col",numeric:!0},{default:t(()=>[n(" Properties ")]),_:1}),o(u,{scope:"col",numeric:!0},{default:t(()=>[n(" Status ")]),_:1}),o(u,{scope:"col",numeric:!0})]),_:1})]),_:1}),o(p,null,{default:t(()=>[o(m,null,{default:t(()=>[o(u,{scope:"row"},{default:t(()=>[n(" Apr - Jun 2026 ")]),_:1}),o(g,{numeric:!0},{default:t(()=>[n(" Â£0 ")]),_:1}),o(g,{numeric:!0},{default:t(()=>[n(" 2 ")]),_:1}),o(g,{numeric:!0},{default:t(()=>[o(C,null,{default:t(()=>[n(" Starts soon ")]),_:1})]),_:1}),o(g,{nuermic:!0},{default:t(()=>[ke]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0),c.accomProviderList.length>0?(l(),f("div",Le,[o(h,{caption:"Visitor accommodations registered"},{default:t(()=>[o(v,null,{default:t(()=>[o(u,{scope:"col"},{default:t(()=>[n(" Name ")]),_:1}),o(u,{scope:"col"},{default:t(()=>[n(" Address ")]),_:1}),o(u,{numeric:!0,scope:"col"},{default:t(()=>[n(" Council ")]),_:1}),o(u,{numeric:!0,scope:"col"})]),_:1}),o(p,null,{default:t(()=>[(l(!0),f(k,null,N(c.accomProviderList,(b,P)=>(l(),S(m,null,{default:t(()=>[o(u,null,{default:t(()=>{var V;return[n(d(((V=b.accommodation)==null?void 0:V.accomName)??`${_.homeText.accommodationView.noNamePlaceholder} ${P+1}`),1)]}),_:2},1024),o(g,{scope:"row"},{default:t(()=>[n(d(b.accommodation.address.postcode),1)]),_:2},1024),o(g,{numeric:!0},{default:t(()=>[n(" Cardiff ")]),_:1}),o(g,{numeric:!0},{default:t(()=>[r("button",{class:"button-anchor",onClick:a[0]||(a[0]=V=>e.$emit("changePage","AccommodationView"))}," View ")]),_:1})]),_:2},1024))),256))]),_:1})]),_:1}),r("button",{class:"mb-8 button-anchor standalone-anchor",onClick:a[1]||(a[1]=b=>e.$emit("changePage","AccommodationView"))}," View properties ")])):T("",!0)],64)}const Te=x(Se,[["render",Ce]]);const xe={name:"accommodation-view",props:{homeText:{type:Object,required:!0}},emits:["changePage"],components:{WraButton:I,WraServiceLogo:$,WraViewTitle:R,WraHeader:A,WraDivider:D,WraValidationTooltip:Q,GdsSummaryAccom:ae,GdsSumCard:U,GdsSumCardActions:K},data(){return{accomProviderList:[],accomPresent:!1,panels:[],tab:[],showLinkError:!1}},methods:{convertReadable:function(e){return e?e="Yes":e="No",e},editField:function(e,a){this.formStateStore.startEdit(a,[a],"AccommodationView"),this.formStateStore.setQueues([e]),this.$router.push({name:"vlRegistration"})},startProvider:function(){this.$router.push({name:"vlRegistration"})},editProvider:function(e){this.providersStore.setProviderIndex(e),this.$emit("changePage","EditProperty")},changePage:function(e){currentView=e},accomCompleteWrapper:function(e){return ne(e)},linkBusinesses:function(){if(this.formStateStore.getLiableQueue.length<=0){this.showLinkError=!0;return}let e=this.formStateStore.getLiableQueue.length==1?"LiablePersonSelect":"SmartSameProvider";this.formStateStore.setFormStartComponent(e),this.$router.push({name:"vlRegistration"})}},created(){this.accomProviderList=JSON.parse(JSON.stringify(this.providersStore.getProviders));for(const e of this.accomProviderList)if(!(Object.keys(e).length<=0)){if("accomodation"in e&&(e.accommodation.accomType=z(e.accommodation.accomType)??"",e.accommodation.accomMainRes=this.convertReadable(e.accommodation.accomMainRes)??"",e.accommodation.responsibleCurrentYear=this.convertReadable(e.accommodation.responsibleCurrentYear)??""),"contactPerson"in e){if("langPref"in e.contactPerson)try{e.contactPerson.langPref=e.contactPerson.langPref.charAt(0).toUpperCase()+e.contactPerson.langPref.slice(1)}catch{e.contactPerson.langPref=""}"contactPref"in e.contactPerson&&(e.contactPerson.contactPref.forEach((a,_)=>{_<=0&&(e.contactPerson.contactPref[_]=a.charAt(0).toUpperCase()+a.slice(1))}),e.contactPerson.contactPref=e.contactPerson.contactPref.join(", "))}"levy"in e&&(e.levy.annualReturn=this.convertReadable(e.levy.annualReturn)??"")}this.accomPresent=this.accomProviderList.length>0},computed:{...w(B,["providers"]),...w(E,["formState"]),accomText(){return this.homeText.accommodationView}}},Ve=e=>(se("data-v-729277ff"),e=e(),re(),e),Ae=Ve(()=>r("span",{class:"sr-only"},"Error:",-1)),$e={class:"ml-n4 mb-4"},Ne={class:"mb-4"},Re={class:"gds-sum-card-title"},Ee=["onClick"],Ge=["onClick"],Ie={key:1,class:"no-provider pa-4"};function De(e,a,_,L,c,s){const y=i("wra-header"),u=i("wra-validation-tooltip"),m=i("wra-button"),v=i("gds-sum-card-actions"),g=i("gds-summary-accom"),C=i("gds-sum-card");return l(),f(k,null,[o(y,{size:"h2",class:"mb-6"},{default:t(()=>[n(d(s.accomText.title),1)]),_:1}),o(W,{name:"translate",mod:"out-in"},{default:t(()=>[c.showLinkError?(l(),f("div",{class:"my-4",key:s.accomText.noLiableLink},[o(u,{type:"wra-error",role:"alert"},{default:t(()=>[Ae,n(" "+d(s.accomText.noLiableLink),1)]),_:1})])):T("",!0)]),_:1}),r("div",$e,[o(m,{variant:"flat",color:"#019e1e",ripple:!0,class:"ml-4 mb-2",lang:"en","prepend-icon":"mdi-home-plus",onClick:a[0]||(a[0]=p=>e.$router.push({name:"vlRegistration"}))},{default:t(()=>[n(d(s.accomText.addAccommodation),1)]),_:1}),o(m,{variant:"flat",color:"#019e1e",ripple:!0,class:"ml-4 mb-2",lang:"en","prepend-icon":"mdi-link-plus",onClick:a[1]||(a[1]=p=>s.linkBusinesses())},{default:t(()=>[n(d(s.accomText.linkLiable),1)]),_:1})]),c.accomPresent?(l(!0),f(k,{key:0},N(c.accomProviderList,(p,h)=>(l(),f("div",Ne,["accommodation"in p?(l(),S(C,{key:0},{title:t(()=>{var b;return[r("div",Re,[o(G,{class:"mr-4 pb-1"},{default:t(()=>[n("mdi-home")]),_:1}),r("h3",null,d(((b=p.accommodation)==null?void 0:b.accomName)??`${s.accomText.noNamePlaceholder} ${h+1}`),1)]),o(v,null,{default:t(()=>[r("li",null,[s.accomCompleteWrapper(c.accomProviderList[h])?T("",!0):(l(),f("button",{key:0,class:"button-anchor",id:"fill-levy-button",onClick:P=>s.startProvider(h)},d(s.accomText.incomplete),9,Ee))]),r("li",null,[r("button",{class:"button-anchor",id:"change-accommodation",onClick:P=>s.editProvider(h)}," Change ",8,Ge)])]),_:2},1024)]}),default:t(()=>[o(g,{"accommodation-details":p.accommodation,onEditPressed:b=>s.editField(h,b)},null,8,["accommodation-details","onEditPressed"])]),_:2},1024)):(l(),f("div",Ie,[o(m,{color:"#c85442",variant:"flat",ripple:!1,class:"pa-8",id:"nextButton",onClick:b=>s.startProvider(h)},{default:t(()=>[n(d(s.accomText.completeReg),1)]),_:2},1032,["onClick"])]))]))),256)):T("",!0)],64)}const Oe=x(xe,[["render",De],["__scopeId","data-v-729277ff"]]);const Be={name:"account-view",props:{homeText:{type:Object,requried:!0},accountInfo:{type:Object,required:!0}},emits:["editPressed"],components:{WraSimpleTable:ie,WraHeader:A,WraViewTitle:R,GdsTable:j,GdsTableBody:H,GdsTableData:q,GdsTableHead:F,GdsTableHeader:M,GdsTableRow:J,GdsTag:Y},data(){return{accountInfo:{},members:[]}},methods:{convertReadable:function(e){return e?e="Yes":e="No",e},startAddAccount:function(){this.formStateStore.setReturnPage("AccountView")},editMember:function(e){this.accountStore.setMemberIndex(e),this.$router.push({name:"addAccount"})}},computed:{...w(E,["formState"]),...w(O,["account"])},created(){this.accountInfo=structuredClone(X(this.accountStore.getAccountDetails)),this.members=this.accountStore.getMembers}},We=["onClick"];function je(e,a,_,L,c,s){const y=i("wra-header"),u=i("gds-table-header"),m=i("gds-table-data"),v=i("gds-table-row"),g=i("gds-table-body"),C=i("gds-table"),p=i("gds-table-head"),h=i("gds-tag"),b=i("router-link");return l(),f(k,null,[o(y,{size:"h2",class:"mb-6"},{default:t(()=>[n(d(_.homeText.settings.title),1)]),_:1}),o(C,{class:"mt-6",caption:"Account information"},{default:t(()=>[o(g,null,{default:t(()=>[o(v,null,{default:t(()=>[o(u,{scope:"row"},{default:t(()=>[n(" Email ")]),_:1}),o(m,{numeric:!0},{default:t(()=>[n(d(c.accountInfo.email??"No email"),1)]),_:1})]),_:1})]),_:1})]),_:1}),o(C,{class:"mt-6",caption:"Account members"},{default:t(()=>[o(p,null,{default:t(()=>[o(v,null,{default:t(()=>[o(u,null,{default:t(()=>[n("Email")]),_:1}),o(u,{scope:"col",numeric:!0},{default:t(()=>[n(" Permission ")]),_:1}),o(u,{scope:"col",numeric:!0},{default:t(()=>[n(" Added ")]),_:1}),o(u,{scope:"col",numeric:!0})]),_:1})]),_:1}),o(g,null,{default:t(()=>[c.members.length==0?(l(),S(v,{key:0},{default:t(()=>[o(m,null,{default:t(()=>[n("No members yet")]),_:1}),o(m),o(m),o(m)]),_:1})):T("",!0),(l(!0),f(k,null,N(c.members,(P,V)=>(l(),S(v,null,{default:t(()=>[o(u,{scope:"row"},{default:t(()=>[n(d(P.email),1)]),_:2},1024),o(m,{numeric:!0},{default:t(()=>[o(h,{color:"yellow"},{default:t(()=>[n(d(P.permission.charAt(0).toUpperCase()+P.permission.slice(1)),1)]),_:2},1024)]),_:2},1024),o(m,{numeric:!0},{default:t(()=>[n(d(new Date().toLocaleDateString()),1)]),_:1}),o(m,{numeric:!0},{default:t(()=>[r("button",{class:"button-anchor",onClick:lt=>s.editMember(V)}," Change ",8,We)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),o(b,{class:"router-link-new-member",to:{name:"addAccount"},onClick:s.startAddAccount},{default:t(()=>[n(" Add new member ")]),_:1},8,["onClick"])],64)}const He=x(Be,[["render",je]]);const qe={name:"liable-person-view",props:{homeText:{type:Object,required:!0}},emits:["changePage"],components:{WraButton:I,WraServiceLogo:$,WraViewTitle:R,WraHeader:A,WraDivider:D,WraValidationTooltip:Q,CompanyDetailsTable:ce,AccomDetailsTable:le,IndividualTable:de,GdsSummaryCompany:ue,GdsSummaryIndividual:me,GdsSumCard:U,GdsSumCardActions:K},data(){return{panels:[],accomPanels:[],tabs:[],liablePeople:[],liablePeoplePresent:!1,showLinkError:!1}},methods:{editLiable:function(e,a){this.providersStore.setLiableIndex(e),a?this.formStateStore.startEdit("LiablePerson",["LiablePerson"],"LiableView"):this.formStateStore.startEdit("FirstLastName",["FirstLastName"],"LiableView"),this.$router.push({name:"vlRegistration"})},newLiable:function(){this.formStateStore.startEdit("LiableRelationship",["LiablePerson","FirstLastName"],"LiableView"),this.$router.push({name:"vlRegistration"})},linkedAccommodations:function(e){const a=this.providersStore.getProviders;let _=[];for(let[L,c]of a.entries())Object.hasOwn(c,"liablePersonIndex")&&c.liablePersonIndex==e&&_.push([L,c]);return _},linkBusinesses:function(){if(this.formStateStore.getLiableQueue.length<=0){this.showLinkError=!0;return}let e=this.formStateStore.getLiableQueue.length==1?"LiablePersonSelect":"SmartSameProvider";this.formStateStore.setFormStartComponent(e),this.$router.push({name:"vlRegistration"})}},created(){this.liablePeople=structuredClone(X(this.providersStore.getLiablePersons)),this.liablePeoplePresent=this.liablePeople.length>0},computed:{...w(B,["providers"]),...w(E,["formState"]),liableText(){return this.homeText.liableView}}},Fe={class:"sr-only"},Me={class:"ml-n4 mb-4"},Je={key:0,class:"gds-sum-card-title"},Ye={key:1,class:"gds-sum-card-title"};function ze(e,a,_,L,c,s){const y=i("wra-header"),u=i("wra-validation-tooltip"),m=i("wra-button"),v=i("gds-summary-individual"),g=i("gds-summary-company"),C=i("gds-sum-card");return l(),f(k,null,[o(y,{size:"h2",class:"mb-6"},{default:t(()=>[n(d(s.liableText.title),1)]),_:1}),o(W,{name:"translate",mod:"out-in"},{default:t(()=>[c.showLinkError?(l(),f("div",{class:"my-4",key:s.liableText.noLiableLink},[o(u,{type:"wra-error",role:"alert"},{default:t(()=>[r("span",Fe,d(_.homeText.error),1),n(" "+d(s.liableText.noLiableLink),1)]),_:1})])):T("",!0)]),_:1}),r("div",Me,[o(m,{variant:"flat",color:"#019e1e",ripple:!0,class:"ml-4 mb-2",lang:"en","prepend-icon":"mdi-home-plus",onClick:a[0]||(a[0]=p=>s.newLiable())},{default:t(()=>[n(d(s.liableText.addLiable),1)]),_:1}),o(m,{variant:"flat",color:"#019e1e",ripple:!0,class:"ml-4 mb-2",lang:"en","prepend-icon":"mdi-link-plus",onClick:a[1]||(a[1]=p=>s.linkBusinesses())},{default:t(()=>[n(d(s.liableText.linkLiable),1)]),_:1})]),c.liablePeoplePresent?(l(!0),f(k,{key:0},N(c.liablePeople,(p,h)=>(l(),S(C,null,{title:t(()=>{var b,P;return["individual"in p?(l(),f("div",Je,[o(G,{class:"mr-4 pb-1"},{default:t(()=>[n("mdi-account")]),_:1}),r("h3",null,d(`Individual: ${(b=p.individual)==null?void 0:b.name}`??`Individual ${h+1}`),1)])):(l(),f("div",Ye,[o(G,{class:"mr-4 pb-1"},{default:t(()=>[n("mdi-domain")]),_:1}),r("h3",null,d(`Company: ${(P=p.company)==null?void 0:P.companyName}`??`Company / charity ${h+1}`),1)]))]}),default:t(()=>["individual"in p?(l(),S(v,{key:0,"individual-store":p,onEditPressed:b=>s.editLiable(h,!1)},null,8,["individual-store","onEditPressed"])):(l(),S(g,{key:1,"company-store":p,onEditPressed:b=>s.editLiable(h,!1)},null,8,["company-store","onEditPressed"]))]),_:2},1024))),256)):T("",!0)],64)}const Qe=x(qe,[["render",ze],["__scopeId","data-v-fed43102"]]);const Ue={name:"gds-list",props:{bullet:{type:Boolean,required:!1},numbered:{type:Boolean,required:!1},spaced:{tye:Boolean,required:!1}}};function Ke(e,a,_,L,c,s){return l(),f("ul",{class:_e(["govuk-list",{"govuk-list--bullet":_.bullet&&!_.numbered,"govuk-list--number":_.numbered&&!_.bullet,"govuk-list--spaced":_.spaced}])},[Z(e.$slots,"default")],2)}const Xe=x(Ue,[["render",Ke]]);const Ze={name:"gds-phase"},et={class:"govuk-phase-banner"};function tt(e,a,_,L,c,s){return l(),f("div",et,[Z(e.$slots,"default",{},void 0,!0)])}const ot=x(Ze,[["render",tt],["__scopeId","data-v-73736c37"]]);const at={name:"service-home",props:{lang:{type:String,required:!0}},components:{WraServiceLogo:$,WraViewTitle:R,WraHeader:A,HomeView:Te,AccommodationView:Oe,AccountView:He,LiableView:Qe,GdsList:Xe,GdsPhase:ot,EditProperty:pe},data(){return{currentView:"HomeView",homeText:{navDrawer:{},todoList:{},homeView:{},accommodationView:{},liableView:{},settings:{}},accommodationNumber:{}}},methods:{changePage:function(e){this.currentView=e,this.$vuetify.display.mobile&&this.drawer==!0&&this.$emit("drawer-switch")},getText:function(){fe.get(`./text/${this.lang}/home.json?v=2`).then(e=>{this.homeText=JSON.parse(JSON.stringify(e.data))})}},watch:{lang:{handler(){this.getText()}}},computed:{...w(E,["formState"]),...w(O,["account"]),getEmail(){return this.accountStore.getAccountDetails.email}},created(){this.getText(),this.formStateStore.getOriginComponent&&(this.currentView=this.formStateStore.getOriginComponent,this.formStateStore.resetOriginComponent())}},nt={class:"pt-2"},st={class:"d-flex justify-space-between phase-text"},rt={class:"d-flex flex-wrap flex-md-nowrap py-8"},it={class:"pr-4"};function ct(e,a,_,L,c,s){const y=i("gds-phase"),u=i("gds-list");return l(),f(k,null,[r("header",nt,[o(y,null,{default:t(()=>[r("div",st,[r("p",null,d(s.getEmail??"[email]"),1),r("a",{href:"#",onClick:a[0]||(a[0]=m=>e.$router.push({name:"login"}))},"Sign out")])]),_:1})]),r("div",rt,[r("nav",it,[o(W,{name:"translate",mode:"out-in"},{default:t(()=>[r("div",null,[o(u,null,{default:t(()=>[r("li",null,[r("button",{class:"button-anchor",onClick:a[1]||(a[1]=m=>s.changePage("HomeView"))},d(c.homeText.navDrawer.home),1)]),r("li",null,[r("button",{class:"button-anchor",onClick:a[2]||(a[2]=m=>s.changePage("AccommodationView"))},d(c.homeText.navDrawer.accommodation),1)]),r("li",null,[r("button",{class:"button-anchor",onClick:a[3]||(a[3]=m=>s.changePage("LiableView"))},d(c.homeText.navDrawer.businesses),1)]),r("li",null,[r("button",{class:"button-anchor",onClick:a[4]||(a[4]=m=>s.changePage("AccountView"))},d(c.homeText.navDrawer.settings),1)])]),_:1})])]),_:1})]),o(he,{class:"pb-6 pt-0 px-0"},{default:t(()=>[r("section",null,[(l(),S(be(c.currentView),{lang:_.lang,homeText:c.homeText,key:c.currentView,onChangePage:s.changePage},null,40,["lang","homeText","onChangePage"]))])]),_:1})])],64)}const mt=x(at,[["render",ct],["__scopeId","data-v-4c804706"]]);export{mt as default};
